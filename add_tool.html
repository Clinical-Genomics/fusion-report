

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Add new tool &mdash; fusion-report 1.1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Add new database" href="add_database.html" />
    <link rel="prev" title="Scoring fusion" href="scoring.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> fusion-report
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Supported tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="download_db.html">Download databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="scoring.html">Scoring fusion</a></li>
</ul>
<p class="caption"><span class="caption-text">Customize</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Add new tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="add_database.html">Add new database</a></li>
<li class="toctree-l1"><a class="reference internal" href="customize_report.html">Customize report</a></li>
</ul>
<p class="caption"><span class="caption-text">Source code</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="core.html">Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="lib.html">Lib</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">fusion-report</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Add new tool</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/add_tool.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="add-new-tool">
<h1>Add new tool<a class="headerlink" href="#add-new-tool" title="Permalink to this headline">Â¶</a></h1>
<p>ToolParser is class responsible for parsing the output from different fusion detection tools.
To add a new tool to the stack you have to (replace &lt;tool-name&gt; with an actual name of the tool):
<strong>TL;DR:</strong> make sure you use the <strong>same name everywhere</strong> otherwise the application will not be
able to detect and invoke the tool.</p>
<ol class="arabic simple">
<li>Create two arguments parameters in <cite>bin/fusion_report</cite>.</li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tool</span>
<span class="n">tools</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
    <span class="s1">&#39;--&lt;tool-name&gt;&#39;</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="s1">&#39;&lt;tool-name&gt; output file&#39;</span><span class="p">,</span>
    <span class="nb">type</span><span class="o">=</span><span class="nb">str</span>
<span class="p">)</span>

<span class="c1"># Weight</span>
<span class="n">tools</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
    <span class="s1">&#39;--&lt;tool-name&gt;_weight&#39;</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="s1">&#39;&lt;tool-name&gt; weight&#39;</span><span class="p">,</span>
    <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
    <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_TOOL_WEIGHT</span>
<span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Add the tool to <cite>SUPPORTED_TOOLS</cite> list in <cite>bin/fusion_report</cite>.</li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SUPPORTED_TOOLS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ericscript&#39;</span><span class="p">,</span> <span class="s1">&#39;starfusion&#39;</span><span class="p">,</span> <span class="s1">&#39;fusioncatcher&#39;</span><span class="p">,</span> <span class="s1">&#39;pizzly&#39;</span><span class="p">,</span> <span class="s1">&#39;squid&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">tool</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Create a static method to parse a line (header is skipped automatically) in fusion_report/helpers/tool_parser.py.
The function has to return name of the fusion and any additional info provided by the tool. The details parameter
can have any attributes, there are no real limitations here. See EricScript example below:</li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">ericscript</span><span class="p">(</span><span class="n">col</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Function for parsing output from EricScript.</span>

<span class="sd">    Args:</span>
<span class="sd">        col (list): List of columns of a single line</span>
<span class="sd">    Returns:</span>
<span class="sd">        tuple: fusion (str) and details (dict)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fusion</span> <span class="o">=</span> <span class="n">f</span><span class="s2">&quot;{col[0]}--{col[1]}&quot;</span>
    <span class="n">details</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;position&#39;</span><span class="p">:</span> <span class="n">f</span><span class="s2">&quot;{col[2]}:{col[3]}:{col[4]}#{col[5]}:{col[6]}:{col[7]}&quot;</span><span class="p">,</span>
        <span class="s1">&#39;discordant_reads&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">col</span><span class="p">[</span><span class="mi">10</span><span class="p">]),</span>
        <span class="s1">&#39;junction_reads&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">col</span><span class="p">[</span><span class="mi">11</span><span class="p">]),</span>
        <span class="s1">&#39;fusion_type&#39;</span><span class="p">:</span> <span class="n">col</span><span class="p">[</span><span class="mi">14</span><span class="p">],</span>
        <span class="s1">&#39;gene_expr1&#39;</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">col</span><span class="p">[</span><span class="mi">18</span><span class="p">]),</span>
        <span class="s1">&#39;gene_expr2&#39;</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">col</span><span class="p">[</span><span class="mi">19</span><span class="p">]),</span>
        <span class="s1">&#39;gene_expr_fusion&#39;</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">col</span><span class="p">[</span><span class="mi">20</span><span class="p">])</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">fusion</span><span class="p">,</span> <span class="n">details</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li>Write tests to make sure everything works</li>
<li>Make a pull request (PR) so everyone else can use it as well!</li>
</ol>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="add_database.html" class="btn btn-neutral float-right" title="Add new database" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="scoring.html" class="btn btn-neutral float-left" title="Scoring fusion" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Martin Proks

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>